---
layout: post
title:  "Data Visualizations in R - Bar charts"
date:   2015-12-25
---

<span class="dropcap">I</span>t's my first time intending to give up `ggplot2`, when I saw the amazing(狂霸酷炫拽) plotting galleries using `googleVis` and `rCharts`.

Here is a simple bar charts example. Screenshots of results can be found [here](https://github.com/HongleiXie/hongleixie.github.io/blob/master/assets/img/googlevis_1225.png), [here](https://github.com/HongleiXie/hongleixie.github.io/blob/master/assets/img/rchart_1225.png) and [here](https://github.com/HongleiXie/hongleixie.github.io/blob/master/assets/img/ggplot_1225.png).
However, I really suggest you to run the codes locally so that you can see the difference clearly.

###How do people choose?

- Generally speaking, both `googleVis` and `rCharts` are dynamic, allowing users to create interactive charts based on data frames.
- If you don't need many customizations and the audience cares a lot about plotting quality,such as clients from industries, go for the `googleVis` because it's just an interface between R and the Google Charts API. If your clients trust Google Charts, they should also trust plots generated by `googleVis`.
- If you don't need many customizations and you have javascript language, go for `rCharts`.
- If you need customizations or you don't need to make plots interactively, go for `ggplot2`. Also, it's also possible to render plots with `shiny`, whenever the plots are coming from.
- If you are the expert in javascript and html, why don't you create your own fancy plotting library? :)

```r
library(ggplot2);
library(googleVis);
library(rCharts);

### sample data ###################################################
data <- data.frame(month = c('AUG', 'SEP', 'OCT', 'NOV', 'DEC'),
                   var1 = c(7 ,2,1,14,8),
                   var2 = c(2,1,4,1,2)
                    );

data$target <- 9;

#### googlevis ####################################################
googlevis <- gvisComboChart(data = data, xvar = 'month', 
                         yvar = c('var1', 'target','var2'),                         
                         options=list(seriesType="bars",
                                      seriesType="bars",
                                      title="Test Title",
                                      
                                      series='{1: {type:"line"}}')
                          );

plot(googlevis);

```
<!---
Screenshot:

<figure>
    <img src="{{ '/assets/img/googlevis_1225.png' | prepend: site.baseurl }}" alt="">
    <figcaption>Fig1. - googleVis</figcaption>
</figure>
--->

```r

### rCharts #######################################################

# same dataset but need more manipulation if using rCharts or ggplot2

data <- data.frame(
                  month = c('AUG', 'SEP', 'OCT', 'NOV', 'DEC', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'),
                   type = c(rep('var1', 5), rep('var2', 5)),
                   count = c(7,2,1,14 ,8,2,1,4,1,2)
                   );


n2 <- nPlot(count ~ month, 
            group = "type", 
            data = data, 
            type = 'multiBarChart'
            );

n2$chart(showControls = F);
n2$set(width = 500, height=400);
n2$chart(reduceXTicks = FALSE);
n2$yAxis(axisLabel = 'count');
n2$templates$script <- "http://timelyportfolio.github.io/rCharts_nvd3_templates/chartWithTitle_styled.html";
n2$set(title = 'TITLE');
n2$yAxis(tickFormat = "#!
        function(d) {return d3.format('.')(d)}
        !#"
        );
n2;

```
<!---
Screenshot:
<figure>
    <img src="{{ '/assets/img/rchart_1225.png' | prepend: site.baseurl }}" alt=""> 
    <figcaption>Fig2. - rCharts</figcaption>
</figure>
--->

```r
### ggplot2 #######################################################
positions <- c('AUG', 'SEP', 'OCT', 'NOV');

ggplot(data=data, aes(x=month, y=count, fill=type, ymax = max(count)+1)) +  
  xlab("Meeting Date") + ylab("Number of Calls") +
  geom_bar(stat="identity", position=position_dodge())+
  scale_x_discrete(limits = positions)+
  theme_bw()+geom_hline(yintercept = 9)+
  geom_text(aes(label = count,y = count, x=month),size = 5, position = position_dodge(width=0.9));


```
<!---
<figure>
    <img src="{{ '/assets/img/ggplot_1225.png' | prepend: site.baseurl }}" alt=""> 
    <figcaption>Fig3. - ggplot2</figcaption>
</figure>
--->
Check out the example pages for package [`rCharts`](http://rcharts.io/gallery/) and [`googleVis`](http://rcharts.io/gallery/).

